import{b as $,u as k,r as a,j as e,a as l}from"./index-Ca2uYnIX.js";import{W as C,C as I,T as P,a as R,b as E,g as F}from"./WatchProviders-CLoJ4Qsz.js";const L=s=>{if(!s)return"N/A";const i=new Date(s);return new Intl.DateTimeFormat(void 0,{year:"numeric",month:"long",day:"numeric"}).format(i)},U=()=>{const{tvId:s}=$(),{addToWatchlist:i,removeFromWatchlist:j,isInWatchlist:n}=k(),[t,d]=a.useState(null),[y,h]=a.useState([]),[T,x]=a.useState([]),[b,g]=a.useState({}),[m,p]=a.useState(null),[o,v]=a.useState(!1);a.useEffect(()=>{(async()=>{try{const r="62e40be0d9c3c699a640079454bed64b",c=F(),[W,D,N,S]=await Promise.all([l.get(`https://api.themoviedb.org/3/tv/${s}?api_key=${r}&language=en-US`),l.get(`https://api.themoviedb.org/3/tv/${s}/credits?api_key=${r}`),l.get(`https://api.themoviedb.org/3/tv/${s}/videos?api_key=${r}&language=en-US`),l.get(`https://api.themoviedb.org/3/tv/${s}/watch/providers?api_key=${r}`)]);d(W.data),h(D.data.cast);const _=N.data.results.filter(f=>f.type==="Trailer"&&f.site==="YouTube").slice(0,3);x(_);const u=S.data.results;g(u[c]?{[c]:u[c]}:{})}catch(r){console.error("Failed to fetch TV details:",r),d(null),h([]),x([]),g({})}})()},[s]),a.useEffect(()=>{t&&v(n(t.id,"tv"))},[t,n]);const w=()=>{t&&(o?j(t.id,"tv"):i({...t,type:"tv"}),v(!o))};return t?e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row items-center lg:items-start gap-6 rounded-lg bg-gray-100 dark:bg-gray-900 p-6",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:t.poster_path?`https://image.tmdb.org/t/p/w500${t.poster_path}`:"https://placehold.co/185x278?text=No+Image&font=roboto",alt:t.name,loading:"lazy",className:"w-64 sm:w-72 lg:w-80 object-cover rounded-lg mb-4 shadow-lg"}),e.jsx(C,{inWatchlist:o,onToggle:w})]}),e.jsxs("div",{className:"flex-1 flex flex-col items-center text-center space-y-4",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold",children:t.name}),e.jsxs("p",{children:[e.jsx("strong",{children:"First Shown Date:"})," ",L(t.first_air_date)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Rating:"})," ",t.vote_average," / 10"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Overview:"})," ",t.overview]}),e.jsx(I,{cast:y}),e.jsx(P,{trailers:T,onSelect:p}),m&&e.jsx(R,{trailer:m,onClose:()=>p(null)}),e.jsx(E,{providers:b})]})]})}):e.jsx("div",{className:"container mx-auto p-4 text-center",children:e.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300",children:"Loading TV details..."})})};export{U as default};
