import{b as $,u as k,r as a,j as e,a as i}from"./index-D2hNANyo.js";import{W as C,C as I,T as P,a as R,g as E}from"./WatchProviders-D26I0zpS.js";import{T as F}from"./TrailerModal-VFgebojS.js";const L=s=>{if(!s)return"N/A";const l=new Date(s);return new Intl.DateTimeFormat(void 0,{year:"numeric",month:"long",day:"numeric"}).format(l)},Y=()=>{const{tvId:s}=$(),{addToWatchlist:l,removeFromWatchlist:j,isInWatchlist:n}=k(),[t,d]=a.useState(null),[T,h]=a.useState([]),[y,x]=a.useState([]),[b,m]=a.useState({}),[g,p]=a.useState(null),[o,v]=a.useState(!1);a.useEffect(()=>{(async()=>{try{const r="62e40be0d9c3c699a640079454bed64b",c=E(),[N,S,W,D]=await Promise.all([i.get(`https://api.themoviedb.org/3/tv/${s}?api_key=${r}&language=en-US`),i.get(`https://api.themoviedb.org/3/tv/${s}/credits?api_key=${r}`),i.get(`https://api.themoviedb.org/3/tv/${s}/videos?api_key=${r}&language=en-US`),i.get(`https://api.themoviedb.org/3/tv/${s}/watch/providers?api_key=${r}`)]);d(N.data),h(S.data.cast);const _=W.data.results.filter(f=>f.type==="Trailer"&&f.site==="YouTube").slice(0,3);x(_);const u=D.data.results;m(u[c]?{[c]:u[c]}:{})}catch(r){console.error("Failed to fetch TV details:",r),d(null),h([]),x([]),m({})}})()},[s]),a.useEffect(()=>{t&&v(n(t.id,"tv"))},[t,n]);const w=()=>{t&&(o?j(t.id,"tv"):l({...t,type:"tv"}),v(!o))};return t?e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row items-center lg:items-start gap-6 rounded-lg bg-gray-100 dark:bg-gray-900 p-6",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:t.poster_path?`https://image.tmdb.org/t/p/w500${t.poster_path}`:"https://placehold.co/185x278?text=No+Image&font=roboto",alt:t.name+"Tv Series"||"No Title",loading:"lazy",className:"w-64 sm:w-72 lg:w-80 object-cover rounded-lg mb-4 shadow-lg"}),e.jsx(C,{inWatchlist:o,onToggle:w})]}),e.jsxs("div",{className:"flex-1 flex flex-col items-center text-center space-y-4",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold",children:t.name}),e.jsxs("p",{children:[e.jsx("strong",{children:"First Shown Date:"})," ",L(t.first_air_date)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Rating:"})," ",t.vote_average," / 10"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Overview:"})," ",t.overview]}),e.jsx(I,{cast:T}),e.jsx(P,{trailers:y,onSelect:p}),g&&e.jsx(F,{trailer:g,onClose:()=>p(null)}),e.jsx(R,{providers:b})]})]})}):e.jsx("div",{className:"container mx-auto p-4 text-center",children:e.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300",children:"Loading TV details..."})})};export{Y as default};
