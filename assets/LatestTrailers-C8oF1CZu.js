import{r,j as t,a as m}from"./index-KyQD4WVG.js";import{S as g,a as v,E as w,A as y,b}from"./SkeletonLoader-0dyXs2_Y.js";import{T as j}from"./TrailerModal-B1wD4EA9.js";const T=async s=>(await m.get("https://api.themoviedb.org/3/trending/movie/week",{params:{api_key:s}})).data.results,k=async(s,l)=>(await m.get(`https://api.themoviedb.org/3/movie/${s}/videos`,{params:{api_key:l}})).data.results,E=()=>{const[s,l]=r.useState([]),[o,n]=r.useState(!0),[d,c]=r.useState(null),[p,x]=r.useState(null),i="62e40be0d9c3c699a640079454bed64b";r.useEffect(()=>{(async()=>{try{n(!0),c(null);const a=await T(i);l(a)}catch{c("Failed to fetch latest trailers.")}finally{n(!1)}})()},[i]);const f=async e=>{try{const h=(await k(e.id,i)).find(u=>u.site==="YouTube"&&u.type==="Trailer");h?x({key:h.key,name:e.title||e.name}):alert("Trailer not available.")}catch{alert("Failed to load trailer.")}};return t.jsxs("div",{className:"latest-trailers container mx-auto px-4 py-6 relative overflow-x-hidden overflow-y-visible",children:[t.jsx("h2",{className:"text-4xl font-bold mb-8 text-center",children:"Latest Trailers"}),o?t.jsx("div",{className:"flex justify-center gap-4 flex-wrap",children:Array.from({length:6},(e,a)=>t.jsx(g,{},a))}):d?t.jsx("p",{className:"text-center text-red-600",children:d}):s.length===0?t.jsx("p",{className:"text-center",children:"No trailers found."}):t.jsxs(t.Fragment,{children:[t.jsx(v,{effect:"coverflow",grabCursor:!0,centeredSlides:!0,loop:s.length>3,autoplay:{delay:3e3,disableOnInteraction:!1},coverflowEffect:{rotate:30,stretch:0,depth:80,modifier:1.2,slideShadows:!0},breakpoints:{0:{slidesPerView:1.2},480:{slidesPerView:1.5},640:{slidesPerView:2},768:{slidesPerView:3},1024:{slidesPerView:4},1280:{slidesPerView:5}},modules:[w,y],className:"w-full max-w-6xl mx-auto overflow-x-hidden relative",children:s.map((e,a)=>t.jsx(b,{className:"overflow-visible relative z-10",children:t.jsx("div",{onClick:()=>f(e),className:"relative group transition-transform duration-300 ease-in-out",children:t.jsxs("div",{className:"bg-slate-500 dark:bg-gray-800 rounded-lg shadow cursor-pointer p-2 relative group-hover:z-50 group-hover:-translate-y-3 group-hover:scale-[1.03] transition-all duration-300",children:[t.jsx("img",{srcSet:e.poster_path?`https://image.tmdb.org/t/p/w342${e.poster_path}`:"https://placehold.co/300x450?text=No+Image",alt:`${e.title||e.name} poster`,loading:a===0?"eager":"lazy",fetchPriority:a===0?"high":"auto",sizes:"(max-width: 600px) 185px, 342px",width:342,height:513,className:"object-cover rounded-md mb-2 w-full h-full"}),t.jsx("div",{className:"text-sm text-center font-semibold text-black dark:text-white",children:e.title||e.name}),t.jsx("div",{className:"text-xs text-center text-black dark:text-gray-300",children:e.release_date?.slice(0,4)||e.first_air_date?.slice(0,4)})]})})},e.id))}),p&&t.jsx(j,{trailer:p,onClose:()=>x(null)})]})]})};export{E as default};
