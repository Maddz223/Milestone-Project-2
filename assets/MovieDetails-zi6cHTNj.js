import{b as $,u as M,r as a,j as e,a as i}from"./index-CjZK0q5_.js";import{W as R,C as k,T as C,a as I,g as P}from"./WatchProviders-C2Z5ovOj.js";import{T as E}from"./TrailerModal-CDrSYdvh.js";const F=s=>{if(!s)return"N/A";const o=new Date(s);return new Intl.DateTimeFormat(void 0,{year:"numeric",month:"long",day:"numeric"}).format(o)},z=()=>{const{movieId:s}=$(),{addToWatchlist:o,removeFromWatchlist:j,isInWatchlist:n}=M(),[t,d]=a.useState(null),[y,m]=a.useState([]),[b,x]=a.useState([]),[T,h]=a.useState({}),[g,p]=a.useState(null),[v,l]=a.useState(!1);a.useEffect(()=>{(async()=>{try{const r="62e40be0d9c3c699a640079454bed64b",c=P(),[N,W,D,S]=await Promise.all([i.get(`https://api.themoviedb.org/3/movie/${s}?api_key=${r}&language=en-US`),i.get(`https://api.themoviedb.org/3/movie/${s}/credits?api_key=${r}`),i.get(`https://api.themoviedb.org/3/movie/${s}/videos?api_key=${r}&language=en-US`),i.get(`https://api.themoviedb.org/3/movie/${s}/watch/providers?api_key=${r}`)]);d(N.data),m(W.data.cast);const _=D.data.results.filter(f=>f.type==="Trailer"&&f.site==="YouTube").slice(0,3);x(_);const u=S.data.results;h(u[c]?{[c]:u[c]}:{})}catch(r){console.error("Failed to fetch movie details:",r),d(null),m([]),x([]),h({})}})()},[s]),a.useEffect(()=>{t&&l(n(t.id,"movie"))},[t,n]);const w=()=>{t&&(v?(j(t.id,"movie"),l(!1)):(o({...t,type:"movie"}),l(!0)))};return t?e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row items-center lg:items-start gap-6 rounded-lg bg-gray-100 dark:bg-gray-900 p-6",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:t.poster_path?`https://image.tmdb.org/t/p/w500${t.poster_path}`:"https://placehold.co/185x278?text=No+Image&font=roboto",alt:t.title+"Movie"||"No Title",className:"w-64 sm:w-72 lg:w-80 object-cover rounded-lg mb-4 shadow-lg"}),e.jsx(R,{inWatchlist:v,onToggle:w})]}),e.jsxs("div",{className:"flex-1 flex flex-col items-center text-center space-y-4",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold",children:t.title}),e.jsxs("p",{children:[e.jsx("strong",{children:"Release Date:"})," ",F(t.release_date)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Rating:"})," ",t.vote_average," / 10"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Overview:"})," ",t.overview]}),e.jsx(k,{cast:y}),e.jsx(C,{trailers:b,onSelect:p}),g&&e.jsx(E,{trailer:g,onClose:()=>p(null)}),e.jsx(I,{providers:T})]})]})}):e.jsx("div",{className:"container mx-auto p-4 text-center",children:e.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300",children:"Loading Movie details..."})})};export{z as default};
